(function(t){function e(e){for(var i,n,o=e[0],r=e[1],c=e[2],d=0,f=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&f.push(s[n][0]),s[n]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);u&&u(e);while(f.length)f.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var t,e=0;e<l.length;e++){for(var a=l[e],i=!0,o=1;o<a.length;o++){var r=a[o];0!==s[r]&&(i=!1)}i&&(l.splice(e--,1),t=n(n.s=a[0]))}return t}var i={},s={app:0},l=[];function n(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=i,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=r;l.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("85ec"),s=a.n(i);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t._m(0),a("FileUpload",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jumbotron"},[a("h1",{staticClass:"display-4"},[a("span",{staticStyle:{color:"#E97B22"}},[t._v("Lambda")]),t._v("Share")]),a("p",{staticClass:"lead"},[t._v("This is a simple file upload and sharing application built using AWS Lambda and AWS S3.")]),a("hr",{staticClass:"my-4"}),a("p",[t._v("The application allows you to upload new files, if they do not exist already. If they exist, you will get a notification and a link to the file.")]),a("p",[t._v("This functionality is achieved via two Lambda functions, one which attempts the upload, and the other (called by the first one) which checks if the file already exists. Lastly, there is a third Lambda function which fetches the most recent files from S3.")]),a("p",{staticClass:"lead"},[a("a",{staticClass:"btn btn-primary btn-lg",attrs:{href:"#",role:"button"}},[t._v("Learn more")])])])}],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row d-flex justify-content-center"},[a("div",{staticClass:"col-12 col-md-8"},[a("div",{staticClass:"input-group"},[t._m(0),a("div",{staticClass:"custom-file"},[a("input",{ref:"file",staticClass:"custom-file-input",attrs:{type:"file",id:"file","aria-describedby":"inputGroupFileAddon01"},on:{change:function(e){return t.handleFileUpload()}}}),a("label",{staticClass:"custom-file-label",attrs:{for:"inputGroupFile01"}},[t._v(t._s(t.fileName))])])])]),a("div",{staticClass:"col-12 col-md-1"},[a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.disabled},on:{click:function(e){return t.submitFile()}}},[t.disabled?a("span",[a("span",{staticClass:"spinner-border",staticStyle:{width:"20px",height:"20px"},attrs:{role:"status"}})]):a("span",[t._v("Submit")])])])]),a("div",{staticClass:"row d-flex justify-content-center",staticStyle:{"margin-top":"10px"}},[t.newUpload?a("div",[a("p",[a("strong",[t._v("Latest uploaded file:")]),a("a",{attrs:{href:t.latestFilePath,target:"_blank"}},[t._v(t._s(t.latestFilePath))])])]):t._e(),t.previousUpload?a("div",[a("p",[a("strong",[t._v("The file you were trying to upload is available at:")]),a("a",{attrs:{href:t.latestFilePath,target:"_blank"}},[t._v(t._s(t.latestFilePath))])])]):t._e()]),t.files&&t.files.length>0?a("div",{staticClass:"row d-flex",staticStyle:{"margin-top":"10px"}},[t._m(1),a("table",{staticClass:"table"},[t._m(2),a("tbody",t._l(t.files,(function(e,i){return a("tr",{key:i},[a("td",[a("a",{attrs:{href:e.file_path,target:"_blank"}},[t._v(t._s(e.name))])]),a("td",[t._v(t._s(e.kb_size))]),a("td",[t._v(t._s(e.created_at))])])})),0)])]):a("div",[a("p",{staticClass:"text-muted"},[t._v("Loading recent files...")]),t._m(3)])])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"inputGroupFileAddon01"}},[t._v("Upload")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",[a("i",{staticClass:"far fa-file"}),t._v(" Most recent files")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("File (click to download)")]),a("th",{attrs:{scope:"col"}},[t._v("Size (KB)")]),a("th",{attrs:{scope:"col"}},[t._v("Created at")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner-border",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])])}],r=(a("b0c0"),a("7338")),c=a.n(r),u=a("c07d"),d=a.n(u);a("300f");i["default"].use(d.a);var f={name:"HelloWorld",props:{msg:String},data:function(){return{file:"",disabled:!1,fileName:"Choose file",buttonText:"Submit",latestFilePath:"",previousUpload:!1,newUpload:!1,files:[]}},mounted:function(){this.getFiles()},methods:{handleFileUpload:function(){this.file=this.$refs.file.files[0],this.fileName=this.$refs.file.files[0].name},submitFile:function(){var t=this,e=new FormData;e.append("file",this.file),this.file&&""!==this.fileName?(t.disabled=!0,c.a.post("/upload",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.file="",t.fileName="Choose file",e.data.file_exists?(i["default"].$toast.info("This file has been previously uploaded.",{position:"top-right"}),t.previousUpload=!0,t.newUpload=!1):(i["default"].$toast.success("File successfully uploaded.",{position:"top-right"}),t.previousUpload=!1,t.newUpload=!0,t.getFiles()),t.latestFilePath=e.data.file_path,t.disabled=!1})).catch((function(e){console.log(e),i["default"].$toast.error("File upload failed.",{position:"top-right"}),t.disabled=!1}))):i["default"].$toast.error("You did not specify a file.",{position:"top-right"})},getFiles:function(){var t=this;c.a.get("/files?limit=10").then((function(e){t.files=e.data.files})).catch((function(t){i["default"].$toast.error("File retrieval failed.",{position:"top-right"})}))}}},p=f,h=a("2877"),v=Object(h["a"])(p,n,o,!1,null,"fd189b0a",null),b=v.exports,_={name:"app",components:{FileUpload:b}},m=_,y=(a("034f"),Object(h["a"])(m,s,l,!1,null,null,null)),g=y.exports;i["default"].config.productionTip=!1,new i["default"]({render:function(t){return t(g)}}).$mount("#app")},"85ec":function(t,e,a){}});
//# sourceMappingURL=app.05bf66f2.js.map